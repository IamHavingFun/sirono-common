<project name="SironoPFP" default="deployCheckOnly"
         basedir=".."
         xmlns:sf="antlib:com.salesforce"
         xmlns:ml="org.missinglink.ant.task.http.HttpClientTask">

    <property name="libdir" value="${basedir}/../build/lib"/>

    <taskdef resource="net/sf/antcontrib/antcontrib.properties"
             classpath="${libdir}/ant-contrib-1.0b3.jar"/>
    <taskdef uri="antlib:com.salesforce"
             resource="com/salesforce/antlib.xml"
             classpath="${libdir}/ant-salesforce.jar"/>
    <taskdef name="http" uri="org.missinglink.ant.task.http.HttpClientTask"
             classname="org.missinglink.ant.task.http.HttpClientTask"
             classpath="${libdir}/ml-ant-http-1.1.3.jar"/>

    <property file="${basedir}/../build/build.properties"/>
    <property environment="env"/>

    <!-- Set the connection properties based on the sPRS values for single-org deployment -->
    <property name="sf.source.username" value="${sf.sprs.source.username}"/>
    <property name="sf.source.password" value="${sf.sprs.source.password}"/>
    <property name="sf.source.serverurl" value="${sf.sprs.source.serverurl}"/>
    <property name="sf.target.username" value="${sf.sprs.target.username}"/>
    <property name="sf.target.password" value="${sf.sprs.target.password}"/>
    <property name="sf.target.serverurl" value="${sf.sprs.target.serverurl}"/>

    <echo>Building Five9 Adapter for target ${sf.target.username} / source ${sf.source.username}.</echo>

    <import file="${basedir}/../build/build-common.xml"/>
    <import file="build_initial_deploy.xml"/>
    <property name="deployRoot" value="${basedir}"/>

    <target name="deploy" depends="processTemplates, _deploy"/>

    <!-- Deploy without tests -->
    <target name="deployNoTests" depends="processTemplates, _deployNoTests" description="Deploys metadata without running unit tests"/>

    <!-- Undeploy obsolete metadata -->
    <target name="undeployCode" depends="build-common.undeployCode" description="Undeploys obsolete metadata without running unit tests"/>

</project>